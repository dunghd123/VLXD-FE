<div class="editable-table">
  <table>
    <thead>
      <tr>
        <th *ngFor="let col of columns" [style.width.px]="col.widthPx">{{ col.label }}</th>
        <th class="actions-col"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of rows; index as i; trackBy: trackByIndex">
        <td *ngFor="let col of columns">
          <ng-container [ngSwitch]="col.type">
            <input *ngSwitchCase="'text'" type="text" [(ngModel)]="row[col.key]" name="{{col.key}}-{{i}}" [required]="!!col.required" [readonly]="col.readonly" (ngModelChange)="onCellChange(i)" />
            <input *ngSwitchCase="'number'" type="number" [(ngModel)]="row[col.key]" name="{{col.key}}-{{i}}" [required]="!!col.required" [readonly]="col.readonly" (ngModelChange)="onCellChange(i)" />
            <select *ngSwitchCase="'select'" [(ngModel)]="row[col.key]" name="{{col.key}}-{{i}}" [required]="!!col.required" (ngModelChange)="onCellChange(i)">
              <option value="" disabled selected>Chọn...</option>
              <option *ngFor="let opt of col.options" [value]="opt.value">{{ opt.label }}</option>
            </select>
          </ng-container>
        </td>
        <td class="row-actions">
          <button type="button" class="btn-remove" (click)="removeRow(i)" [attr.aria-label]="removeButtonAria">×</button>
        </td>
      </tr>
      <tr *ngIf="!rows || rows.length === 0">
        <td class="empty" [attr.colspan]="columns.length + 1">Chưa có dữ liệu</td>
      </tr>
    </tbody>
  </table>
  <div class="table-actions">
    <button type="button" class="btn-add" (click)="addRow()">{{ addButtonLabel }}</button>
  </div>
</div>


