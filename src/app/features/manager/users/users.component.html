<div class="users-page">
  <div class="page-header">
    <h2>Quản lý người dùng</h2>
    <p>Quản lý tài khoản manager và employee trong hệ thống</p>
  </div>
  
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    <i class="fas fa-exclamation-triangle"></i>
    <span>{{ errorMessage }}</span>
    <button (click)="getAllEmployees()" class="btn-retry">
      <i class="fas fa-redo"></i> Thử lại
    </button>
  </div>
  
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Đang tải dữ liệu...</span>
  </div>
  
  <div class="actions">
    <button class="btn-primary" (click)="openAddUserModal()">
      <i class="fas fa-plus"></i>
      <span>Thêm người dùng mới</span>
    </button>
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input 
        type="text" 
        placeholder="Tìm kiếm người dùng..." 
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange()">
    </div>
  </div>
  
  <div class="users-table" *ngIf="!isLoading && !errorMessage">
    <!-- Search Results Info -->
    <div class="search-results-info" *ngIf="searchTerm.trim()">
      <span>Tìm thấy {{ filteredEmployees.length }} người dùng phù hợp với từ khóa "{{ searchTerm }}"</span>
    </div>
    
    <table>
      <thead>
        <tr>
          <th>Tên đăng nhập</th>
          <th>Họ tên</th>
          <th>SĐT</th>
          <th>Giới tính</th>
          <th>Vai trò</th>
          <th>Trạng thái</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredEmployees">
          <td>{{ user.userName }}</td>
          <td>{{ user.fullName }}</td>
          <td>{{ user.phone }}</td>
          <td>{{ user.gender }}</td>
          <td>{{ user.role }}</td>
          <td>
            <span class="status-badge" [class]="getStatusBadgeClass(user.status)">
              <i class="fas" [class]="getStatusIconClass(user.status)"></i>
              {{ user.status | status }}
            </span>
          </td>
          <td>
            <i class="fas fa-edit me-2"></i>
            <i class="fas fa-trash-alt" (click)="openDeleteUserModal(user)"></i>
          </td>
        </tr>
      </tbody>
    </table>
    
    <!-- Empty State -->
    <div *ngIf="filteredEmployees.length === 0 && !isLoading && !errorMessage" class="empty-state">
      <i class="fas fa-search"></i>
      <p *ngIf="searchTerm.trim()">Không tìm thấy người dùng nào phù hợp với từ khóa "{{ searchTerm }}"</p>
      <p *ngIf="!searchTerm.trim()">Không có người dùng nào</p>
    </div>
  </div>
</div>
